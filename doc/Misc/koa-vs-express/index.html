<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Pana Wang">
        <link rel="canonical" href="http://koajs.in/Misc/koa-vs-express/">
        <link rel="shortcut icon" href="../../favicon.ico">
        

        <title>Koa vs Express - Koa</title>

        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../../css/prettify-1.0.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="../..">Koa</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Basic <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../basics/promise">Promise</a>
                        </li>
                    
                        <li >
                            <a href="../../basics/generator">Generator</a>
                        </li>
                    
                        <li >
                            <a href="../../basics/co">Co</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">API <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../API/application">Application</a>
                        </li>
                    
                        <li >
                            <a href="../../API/context">Context</a>
                        </li>
                    
                        <li >
                            <a href="../../API/request">Request</a>
                        </li>
                    
                        <li >
                            <a href="../../API/response">Response</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Middleware <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../Middleware/guide">Guide</a>
                        </li>
                    
                        <li >
                            <a href="../../Middleware/hero">Hero</a>
                        </li>
                    
                        <li >
                            <a href="../../Middleware/middlewares">Middleware List</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Misc <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../error">Error</a>
                        </li>
                    
                        <li >
                            <a href="../example">Example</a>
                        </li>
                    
                        <li >
                            <a href="../resource">Resource</a>
                        </li>
                    
                        <li >
                            <a href="../changelog">Changelog</a>
                        </li>
                    
                        <li class="active">
                            <a href=".">Koa vs Express</a>
                        </li>
                    
                        <li >
                            <a href="../faq">Faq</a>
                        </li>
                    
                        <li >
                            <a href="../whousekoa">WhoUse</a>
                        </li>
                    
                        <li >
                            <a href="../utilities">Utilities</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li >
                    <a href="../../about">About</a>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                
                <li >
                    <a rel="next" href="../changelog">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../faq">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#koa-vs-express">Koa vs Express</a></li>
        
            <li><a href="#does-koa-replace-express">Does Koa replace Express?</a></li>
        
            <li><a href="#does-koa-replace-connect">Does Koa replace Connect?</a></li>
        
            <li><a href="#why-isnt-koa-just-express-40">Why isn't Koa just Express 4.0?</a></li>
        
            <li><a href="#is-koa-faster-than-express">Is Koa faster than Express?</a></li>
        
            <li><a href="#how-is-koa-different-than-connectexpress">How is Koa different than Connect/Express?</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<p>THIS DOCUMENT IS IN PROGRESS. THIS PARAGRAPH SHALL BE REMOVED WHEN THIS DOCUMENT IS DONE.</p>
<h1 id="koa-vs-express">Koa vs Express</h1>
<p>Philosophically, Koa aims to "fix and replace node", whereas Express "augments node". 
  Koa uses co to rid apps of callback hell and simplify error handling.
  It exposes its own <code>this.request</code> and <code>this.response</code> objects instead of node's <code>req</code> and <code>res</code> objects.</p>
<p>Express, on the other hand, augments node's <code>req</code> and <code>res</code> objects with additional properties and methods 
  and includes many other "framework" features, such as routing and templating, which Koa does not.</p>
<p>Thus, Koa can be viewed as an abstraction of node.js's <code>http</code> modules, where as Express is an application framework for node.js.</p>
<table>
<thead>
<tr>
<th align="right">Feature</th>
<th>Koa</th>
<th>Express</th>
<th>Connect</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">Middleware Kernel</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td align="right">Routing</td>
<td></td>
<td>✓</td>
<td></td>
</tr>
<tr>
<td align="right">Templating</td>
<td></td>
<td>✓</td>
<td></td>
</tr>
<tr>
<td align="right">Sending Files</td>
<td></td>
<td>✓</td>
<td></td>
</tr>
<tr>
<td align="right">JSONP</td>
<td></td>
<td>✓</td>
<td></td>
</tr>
</tbody>
</table>
<p>Thus, if you'd like to be closer to node.js and traditional node.js-style coding, you probably want to stick to Connect/Express or similar frameworks. 
  If you want to dive into the land of generators, use Koa.</p>
<p>As result of this different philosophy is that traditional node.js "middleware", i.e. functions of the form <code>(req, res, next)</code>, are incompatible with Koa. Your application will essentially have to be rewritten from the ground, up.</p>
<h2 id="does-koa-replace-express">Does Koa replace Express?</h2>
<p>It's more like Connect, but a lot of the Express goodies
  were moved to the middleware level in Koa to help form
  a stronger foundation. This makes middleware more enjoyable
  and less error-prone to write, for the entire stack, not
  just the end application code.</p>
<p>Typically many middleware would
  re-implement similar features, or even worse incorrectly implement them,
  when features like signed cookie secrets among others are typically application-specific,
  not middleware specific.</p>
<h2 id="does-koa-replace-connect">Does Koa replace Connect?</h2>
<p>No, just a different take on similar functionality
  now that generators allow us to write code with less
  callbacks. Connect is equally capable, and some may still prefer it,
  it's up to what you prefer.</p>
<h2 id="why-isnt-koa-just-express-40">Why isn't Koa just Express 4.0?</h2>
<p>Koa is a pretty large departure from what people know about Express,
  the design is fundamentally much different, so the migration from
  Express 3.0 to this Express 4.0 would effectively mean rewriting
  the entire application, so we thought it would be more appropriate
  to create a new library.</p>
<h2 id="is-koa-faster-than-express">Is Koa faster than Express?</h2>
<p>Koa and Express have very similar benchmark results, both of which are more than enough for most applications. This is especially true for applications with high traffic running multiple instances, because you are scaling horizontally right?</p>
<p>The following results were produced on a Retina Macbook Pro, showing only the cost of running noop middleware.</p>
<table>
<thead>
<tr>
<th align="right">no. middleware</th>
<th>Koa</th>
<th>Express</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">1</td>
<td>8849.36</td>
<td>7805.19</td>
</tr>
<tr>
<td align="right">5</td>
<td>8685.74</td>
<td>7707.15</td>
</tr>
<tr>
<td align="right">10</td>
<td>8511.08</td>
<td>7475.08</td>
</tr>
<tr>
<td align="right">15</td>
<td>8456.86</td>
<td>7261.73</td>
</tr>
<tr>
<td align="right">20</td>
<td>8211.93</td>
<td>7012.07</td>
</tr>
<tr>
<td align="right">30</td>
<td>8102.98</td>
<td>6672.76</td>
</tr>
<tr>
<td align="right">50</td>
<td>7617.67</td>
<td>6255.92</td>
</tr>
<tr>
<td align="right">100</td>
<td>6899.45</td>
<td>5000.98</td>
</tr>
</tbody>
</table>
<h2 id="how-is-koa-different-than-connectexpress">How is Koa different than Connect/Express?</h2>
<h3 id="generated-based-control-flow">Generated-based control flow</h3>
<p>Thanks to co.</p>
<p>No callback hell.</p>
<p>Better error handling through try/catch.</p>
<p>No need for domains.</p>
<h3 id="koa-is-barebones">Koa is barebones</h3>
<p>Unlike both Connect and Express, Koa does not include any middleware.</p>
<p>Unlike Express, routing is not provided.</p>
<p>Unlike Express, many convenience utilities are not provided. For example, sending files.</p>
<p>Koa is more modular.</p>
<h3 id="koa-relies-less-on-middleware">Koa relies less on middleware</h3>
<p>For example, instead of a "body parsing" middleware, you would instead use a body parsing function.</p>
<h3 id="koa-abstracts-nodes-requestresponse">Koa abstracts node's request/response</h3>
<p>Less hackery.</p>
<p>Better user experience.</p>
<p>Proper stream handling.</p>
</div>
        </div>

        

        <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/prettify-1.0.min.js"></script>
        <script src="../../js/base.js"></script>
    </body>
</html>